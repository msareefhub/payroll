"use strict";(self.webpackChunkVankukil_HR_Payroll=self.webpackChunkVankukil_HR_Payroll||[]).push([[7847],{1955:(e,a,l)=>{l.d(a,{Z:()=>s});var t=l(19860),n=l(57829),i=l(46417);const s=e=>{let{color:a,size:l}=e;const s=(0,t.Z)();let d;switch(a){case"secondary":d=s.palette.secondary.main;break;case"error":d=s.palette.error.main;break;case"warning":d=s.palette.warning.main;break;case"info":d=s.palette.info.main;break;case"success":d=s.palette.success.main;break;default:d=s.palette.primary.main}return(0,i.jsx)(n.Z,{sx:{width:l||8,height:l||8,borderRadius:"50%",bgcolor:d}})}},77782:(e,a,l)=>{l.d(a,{Z:()=>p});var t=l(42832),n=l(61113),i=l(9019),s=l(57829),d=l(66212),r=l(661),o=l(27164),c=l(77552),h=l(46417);const x=e=>{let{color:a,title:l,count:x,percentage:p,isLoss:u,tabIcon:g}=e;return(0,h.jsx)(r.Z,{contentSX:{p:2.25},children:(0,h.jsxs)(t.Z,{spacing:.5,children:[(0,h.jsx)(n.Z,{variant:"h4",color:"gray[900]",children:l}),(0,h.jsxs)(i.ZP,{container:!0,alignItems:"center",children:[(0,h.jsx)(i.ZP,{item:!0,sx:{width:"100%"},children:(0,h.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",p:1,m:1,bgcolor:"background.paper",borderRadius:1},children:[(0,h.jsx)(n.Z,{variant:"h2",color:"inherit",children:x}),g]})}),p&&(0,h.jsx)(i.ZP,{item:!0,children:(0,h.jsx)(d.Z,{variant:"combined",color:a,icon:(0,h.jsxs)(h.Fragment,{children:[!u&&(0,h.jsx)(o.Z,{style:{fontSize:"0.75rem",color:"inherit"}}),u&&(0,h.jsx)(c.Z,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(p,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]})})};x.defaultProps={color:"primary"};const p=x},57847:(e,a,l)=>{l.r(a),l.d(a,{default:()=>$});var t=l(9019),n=l(47313),i=l(10658),s=l.n(i),d=l(31222),r=l(2135),o=l(29220),c=l(96216),h=l(23477),x=l(24076),p=l(67478),u=l(42832),g=l(61113),m=l(57829),f=l(51629),v=l(66835),j=l(57861),b=l(90891),y=l(661),Z=l(77782),_=l(92718),P=l(24499),S=l(72724),k=l(12858),w=l(23232),N=l(44730),L=l(8105),C=l(69918),T=l(46968),F=l(87785),I=l(19694),z=l(76859),A=l(32770),R=l(19193),D=l(1955),Y=l(46417);const{confirm:B}=_.default,E=[{id:"id",align:"left",disablePadding:!1,label:"S No."},{id:"employee_name",align:"left",disablePadding:!1,label:"Employee Name"},{id:"employee_code",align:"left",disablePadding:!1,label:"Employee Code"},{id:"leave_title",align:"left",disablePadding:!0,label:"Leave Type"},{id:"leave_from",align:"left",disablePadding:!1,label:"Leave From"},{id:"leave_start_day",align:"left",disablePadding:!1,label:"Leave Start Day"},{id:"leave_to",align:"left",disablePadding:!1,label:"Leave To"},{id:"leave_end_day",align:"left",disablePadding:!1,label:"Leave End Day"},{id:"leave_day",align:"left",disablePadding:!1,label:"No. of Day(s)"},{id:"status",align:"left",disablePadding:!1,label:"Leave Status"},{id:"action",align:"left",disablePadding:!1,label:"Leave Action"}],M=[{id:"id",align:"left",disablePadding:!1,label:"S No."},{id:"type",align:"left",disablePadding:!0,label:"Leave Type"},{id:"default_leave",align:"left",disablePadding:!1,label:"Assigned Leave"},{id:"taken_leave",align:"left",disablePadding:!1,label:"Taken Leave"},{id:"balance_leave",align:"left",disablePadding:!1,label:"Balance Leave"}];function V(e){let{order:a,orderBy:l}=e;return(0,Y.jsx)(h.Z,{children:(0,Y.jsx)(x.Z,{children:M.map((e=>(0,Y.jsx)(p.Z,{align:e.align,padding:e.disablePadding?"none":"normal",sortDirection:l===e.id&&a,children:e.label},e.id)))})})}function O(e){let{order:a,orderBy:l}=e;return(0,Y.jsx)(h.Z,{children:(0,Y.jsx)(x.Z,{children:E.map((e=>(0,Y.jsx)(p.Z,{align:e.align,padding:e.disablePadding?"none":"normal",sortDirection:l===e.id&&a,children:e.label},e.id)))})})}const W=e=>{let a,l,{status:t}=e;switch(t){case"0":a="warning",l="Pending";break;case"1":a="success",l="Approved";break;case"2":a="warning",l="Reject";break;default:a="info",l="None"}return(0,Y.jsxs)(u.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,Y.jsx)(D.Z,{color:a}),(0,Y.jsx)(g.Z,{children:l})]})};function X(){var e,a,l,i;const[h]=(0,n.useState)("asc"),[u]=(0,n.useState)("trackingNo"),[_]=(0,n.useState)([]);let D=0,E=0,M=0,X=0,$=0,H=0,J=0;const[U,q]=(0,n.useState)([]),[G,K]=(0,n.useState)([]),[Q,ee]=(0,n.useState)([]),[ae,le]=(0,n.useState)([]),[te,ne]=(0,n.useState)([]),[ie,se]=(0,n.useState)([]),[de,re]=(0,n.useState)([]),[oe,ce]=(0,n.useState)(!1),[he,xe]=(0,n.useState)(!1),[pe,ue]=(0,n.useState)(!1),[ge,me]=(0,n.useState)([]),[fe,ve]=(0,n.useState)([]),[je,be]=(0,n.useState)([]),[ye,Ze]=(0,n.useState)([]),[_e,Pe]=(0,n.useState)([]),[Se,ke]=(0,n.useState)([]),[we,Ne]=(0,n.useState)(0),[Le,Ce]=(0,n.useState)([{value:"",label:""}]),[Te,Fe]=(0,n.useState)(String((new Date).getFullYear())),Ie=e=>-1!==_.indexOf(e),[ze,Ae]=(0,n.useState)({employeeId:we,year:Te});let Re=0,De=0,Ye=0,Be=0;const Ee=()=>{ce(!0),xe(!0),Ae({employeeId:we,year:Te}),we.length&&((0,o.vp)(we,Te).then((e=>{xe(!0),e.data.length?(ce(!1),ue(!1),ve(e.data),be(e.data.map((e=>(Re+=Number(e.leave_day),Re)))),Ze(e.data.filter((e=>1==e.status)).map((e=>(De+=Number(e.leave_day),De)))),Pe(e.data.filter((e=>0==e.status)).map((e=>(Ye+=Number(e.leave_day),Ye)))),ke(e.data.filter((e=>2==e.status)).map((e=>(Be+=Number(e.leave_day),Be)))),q(e.data.filter((e=>1==e.leave_type&&"1"==e.status)).map((e=>(D+=Number(e.leave_day),D)))),K(e.data.filter((e=>2==e.leave_type&&"1"==e.status)).map((e=>(E+=Number(e.leave_day),E)))),ee(e.data.filter((e=>3==e.leave_type&&"1"==e.status)).map((e=>(M+=Number(e.leave_day),M)))),le(e.data.filter((e=>4==e.leave_type&&"1"==e.status)).map((e=>(X+=Number(e.leave_day),X)))),ne(e.data.filter((e=>5==e.leave_type&&"1"==e.status)).map((e=>($+=Number(e.leave_day),$)))),se(e.data.filter((e=>6==e.leave_type&&"1"==e.status)).map((e=>(H+=Number(e.leave_day),H)))),re(e.data.filter((e=>7==e.leave_type&&"1"==e.status)).map((e=>(J+=Number(e.leave_day),J)))),xe(!1)):(xe(!1),ue(!0),ve([]))})),(0,o.Nk)().then((e=>{e.data&&me(e.data)})))};(0,n.useEffect)((()=>{(0,o.Jf)().then((e=>{e.data&&Ce(e.data.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name),value:null===e||void 0===e?void 0:e.id}))))}))}),[ze]);const Me=(e,a,l,t,n,i,s,d,r)=>{B({title:1===a?"Are you sure approve this leave?":"Are you sure reject this leave?",icon:1===a?(0,Y.jsx)(I.Z,{style:{color:"#009688",fontSize:"32px"}}):(0,Y.jsx)(z.Z,{style:{fontSize:"32px"}}),content:1===a?"Make sure to approve this leave.":"Make sure to reject this leave.",okText:1===a?"Approve":"Reject",okType:"primary",cancelText:"Cancel",onOk(){const c={leaveId:+e,leaveStatus:String(a),officeEmail:l,employeeName:"".concat(t," ").concat(n),employeeCode:i,leaveType:s,leaveFrom:d,leaveTo:r,leaveStatusName:1==a?"Approved":"Rejected"};(0,o.$A)(c).then((e=>{e.data&&Ee()}))},onCancel(){}})};return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(t.ZP,{item:!0,xs:12,children:(0,Y.jsx)(d.$t,{children:(0,Y.jsx)(g.Z,{variant:"h5",children:"Yearly Leave Report"})})}),(0,Y.jsx)(t.ZP,{item:!0,xs:12,sm:6,md:4,lg:12,children:(0,Y.jsx)(y.Z,{sx:{p:4},content:!1,children:(0,Y.jsxs)(P.Z,{gap:12,children:[(0,Y.jsx)(S.Z,{defaultValue:"Select",style:{width:250},onChange:e=>{Ne(e)},options:Le}),(0,Y.jsx)(k.default,{onChange:(e,a)=>{Fe(a)},defaultValue:s()(String((new Date).getFullYear()),"YYYY"),disabledDate:e=>e.isBefore("2024")||e.isAfter("".concat((new Date).getFullYear())),picker:"year"}),(0,Y.jsx)(w.ZP,{type:"primary",onClick:()=>Ee(),children:"Submit"})]})})})]}),oe&&0===we&&(0,Y.jsx)(t.ZP,{item:!0,xs:12,children:(0,Y.jsx)(N.Z,{message:"Warning Message",description:"Please select employee from the list.",type:"warning",showIcon:!0,closable:!0,afterClose:()=>ue(!1)})}),pe&&(0,Y.jsx)(t.ZP,{item:!0,sx:{mt:2},xs:12,children:(0,Y.jsx)(L.Z,{})}),!oe&&he&&(0,Y.jsx)(t.ZP,{item:!0,sx:{mt:8},xs:12,children:(0,Y.jsx)(C.Z,{tip:"Loading",size:"large",children:(0,Y.jsx)("div",{className:"content"})})}),!he&&!pe&&!!fe.length&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(t.ZP,{item:!0,xs:12,children:(0,Y.jsx)(g.Z,{variant:"h5",children:"Overall Leave Status"})}),(0,Y.jsx)(t.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,Y.jsx)(Z.Z,{title:"Total Leave",count:null!==(e=je[je.length-1])&&void 0!==e?e:0,tabIcon:(0,Y.jsx)(A.Z,{style:{fontSize:"4rem",color:"#F44336"}})})}),(0,Y.jsx)(t.ZP,{item:!0,xs:12,sm:6,md:3,lg:3,children:(0,Y.jsx)(Z.Z,{title:"Approved Leave",count:null!==(a=ye[ye.length-1])&&void 0!==a?a:0,tabIcon:(0,Y.jsx)(R.Z,{style:{fontSize:"4rem",color:"#4CAF50"}})})}),(0,Y.jsx)(t.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,Y.jsx)(Z.Z,{title:"Pending Leave",count:null!==(l=_e[_e.length-1])&&void 0!==l?l:0,tabIcon:(0,Y.jsx)(R.Z,{style:{fontSize:"4rem",color:"#faad14"}})})}),(0,Y.jsx)(t.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,Y.jsx)(Z.Z,{title:"Rejected Leave",count:null!==(i=Se[Se.length-1])&&void 0!==i?i:0,tabIcon:(0,Y.jsx)(R.Z,{style:{fontSize:"4rem",color:"#F44336"}})})}),(0,Y.jsxs)(t.ZP,{item:!0,xs:12,md:7,lg:12,children:[(0,Y.jsxs)(t.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,Y.jsx)(t.ZP,{item:!0,sx:{mt:3},children:(0,Y.jsxs)(g.Z,{variant:"h4",children:["Employee Yealry Leave Report - ",ze.year]})}),(0,Y.jsx)(t.ZP,{item:!0})]}),(0,Y.jsx)(y.Z,{sx:{mt:2},content:!1,children:(0,Y.jsx)(m.Z,{children:(0,Y.jsx)(f.Z,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,Y.jsxs)(v.Z,{"aria-labelledby":"tableTitle",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,Y.jsx)(O,{order:h,orderBy:u}),(0,Y.jsx)(j.Z,{children:fe.map(((e,a)=>{const l=Ie(112),t="enhanced-table-checkbox-".concat(a);return(0,Y.jsxs)(x.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},"aria-checked":l,tabIndex:-1,selected:l,children:[(0,Y.jsx)(p.Z,{align:"left",children:a+1}),(0,Y.jsx)(p.Z,{component:"th",id:t,scope:"row",align:"left",children:(0,Y.jsx)(b.Z,{color:"secondary",component:r.rU,to:"",children:e.employee_code})}),(0,Y.jsxs)(p.Z,{align:"left",children:[e.first_name," ",e.last_name]}),(0,Y.jsx)(p.Z,{align:"left",children:e.type}),(0,Y.jsx)(p.Z,{align:"left",children:(0,c.xE)(e.leave_from)}),(0,Y.jsx)(p.Z,{align:"left",children:(0,c.tB)(e.leave_from)}),(0,Y.jsx)(p.Z,{align:"left",children:(0,c.xE)(e.leave_to)}),(0,Y.jsx)(p.Z,{align:"left",children:(0,c.tB)(e.leave_to)}),(0,Y.jsx)(p.Z,{align:"left",children:"1"===e.leave_day?"".concat(e.leave_day," day"):"".concat(e.leave_day," days")}),(0,Y.jsx)(p.Z,{align:"left",children:W({status:e.status})}),(0,Y.jsx)(p.Z,{align:"left",children:(0,Y.jsxs)(T.Z,{split:(0,Y.jsx)(F.Z,{type:"vertical"}),children:[("0"===e.status||"2"===e.status)&&(0,Y.jsx)(w.ZP,{type:"primary",onClick:()=>{Me(e.id,1,e.office_email,e.first_name,e.last_name,e.employee_code,e.type,e.leave_from,e.leave_to)},children:"Approve"}),"2"!=e.status&&"3"!=e.status&&(0,Y.jsx)(w.ZP,{type:"primary",onClick:()=>{Me(e.id,2,e.office_email,e.first_name,e.last_name,e.employee_code,e.type,e.leave_from,e.leave_to)},danger:!0,children:"Reject"})]})})]},a)}))})]})})})})]}),(0,Y.jsx)(t.ZP,{item:!0,xs:12,md:7,lg:12,children:(0,Y.jsx)(y.Z,{sx:{mt:2},content:!1,children:(0,Y.jsx)(m.Z,{children:(0,Y.jsx)(f.Z,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,Y.jsxs)(v.Z,{"aria-labelledby":"tableTitle",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,Y.jsx)(V,{order:h,orderBy:u}),(0,Y.jsx)(j.Z,{children:ge.map(((e,a)=>{const l=Ie(112);return(0,Y.jsxs)(x.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},"aria-checked":l,tabIndex:-1,selected:l,children:[(0,Y.jsx)(p.Z,{align:"left",children:a+1}),(0,Y.jsx)(p.Z,{align:"left",children:e.type}),(0,Y.jsx)(p.Z,{align:"left",children:e.default_leave}),(0,Y.jsx)(p.Z,{align:"left",children:("1"===e.id?U[U.length-1]:0)||("2"===e.id?G[G.length-1]:0)||("3"===e.id?Q[Q.length-1]:0)||("4"===e.id?ae[ae.length-1]:0)||("5"===e.id?te[te.length-1]:0)||("6"===e.id?ie[ie.length-1]:0)||("7"===e.id?de[de.length-1]:0)}),(0,Y.jsx)(p.Z,{align:"left",children:("1"===e.id?U.length?e.default_leave-U[U.length-1]:e.default_leave:0)||("2"===e.id?G.length?e.default_leave-G[G.length-1]:e.default_leave:0)||("3"===e.id?Q.length?e.default_leave-Q[Q.length-1]:e.default_leave:0)||("4"===e.id?ae.length?e.default_leave-ae[ae.length-1]:e.default_leave:0)||("5"===e.id?te.length?e.default_leave-te[te.length-1]:e.default_leave:0)||("6"===e.id?ie.length?e.default_leave-ie[ie.length-1]:e.default_leave:0)||("7"===e.id?de.length?e.default_leave-de[de.length-1]:e.default_leave:0)})]},a)}))})]})})})})})]})]})}const $=()=>(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(t.ZP,{container:!0,rowSpacing:2,columnSpacing:2.75,children:(0,Y.jsx)(X,{})})})},31222:(e,a,l)=>{l.d(a,{$t:()=>o,F0:()=>x,a1:()=>c,tr:()=>h});var t,n,i,s,d=l(30168),r=l(2905);const o=r.ZP.div(t||(t=(0,d.Z)(["\n  padding: 1em;\n  background-color: #e6f7ff;\n  border-top: 1px solid #b3ddff;\n  border-left: 1px solid #b3ddff;\n  border-right: 2px solid #1890ff;\n  border-bottom: 1px solid #b3ddff;\n  color: #000;\n"]))),c=r.ZP.div(n||(n=(0,d.Z)(["\n  display: block;\n  cursor: pointer;\n\n  svg {\n    font-size: 24px;\n  }\n"]))),h=r.ZP.div(i||(i=(0,d.Z)(["\n  display: flex;\n  margin-top: 20px;\n\n  label {\n    width: 200px;\n  }\n\n  div.ant-select {\n    width: 100%;\n  }\n"]))),x=r.ZP.div(s||(s=(0,d.Z)(["\n  display: grid;\n  padding: 20px 0 20px 0;\n"])))}}]);